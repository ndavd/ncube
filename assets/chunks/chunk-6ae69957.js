function $e(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function G(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return $e()&&(n.stack=Re(n.stack,t)),n}function Re(e,t){if(!e)return e;const n=Te(e);let r=0;return n.filter(i=>i.includes(" (internal/")||i.includes(" (node:internal")?!1:r<t&&be(i)?(r++,!1):!0).join(`
`)}function be(e){return e.startsWith("    at ")}function Te(e){return e.split(/\r?\n/)}function P(e,t){const n=globalThis.__vike=globalThis.__vike||{};return n[e]=n[e]||t}function S(e){return typeof e=="object"&&e!==null}function H(e){return Array.from(new Set(e))}const w=P("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),ae="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vike.dev/client-runtimes-conflict",M="Two vike client runtime instances are being loaded. Make sure your client-side bundles don't include vike twice. (In order to reduce the size of your client-side JavaScript bundles.)";function J(){{const e=H(w.instances);ke(e.length<=1,`Both vike@${e[0]} and vike@${e[1]} loaded. Only one version should be loaded.`)}w.checkSingleInstance&&w.instances.length>1&&I(!1,M,{onlyOnce:!0,showStackTrace:!0})}function Yt(e){I(w.isClientRouting!==!0,ae,{onlyOnce:!0,showStackTrace:!0}),I(w.isClientRouting===void 0,M,{onlyOnce:!0,showStackTrace:!0}),w.isClientRouting=!1,e&&(w.checkSingleInstance=!0),J()}function qt(e){I(w.isClientRouting!==!1,ae,{onlyOnce:!0,showStackTrace:!0}),I(w.isClientRouting===void 0,M,{onlyOnce:!0,showStackTrace:!0}),w.isClientRouting=!0,e&&(w.checkSingleInstance=!0),J()}function Pe(e){w.instances.push(e),J()}function ke(e,t){if(e)return;const n=`[vike][Wrong Usage] ${t}`;throw new Error(n)}function I(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const s=`[vike][Warning] ${t}`;if(n){const{alreadyLogged:i}=w,a=n===!0?s:n;if(i.has(a))return;i.add(a)}console.warn(r?new Error(s):s)}const Ie="0.4.145",b={projectName:"Vike",projectVersion:Ie,npmPackageName:"vike",githubRepository:"https://github.com/vikejs/vike"};Pe(b.projectVersion);const le=new Proxy(e=>e,{get:()=>le}),y=le,m=P("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),_e=`[${b.npmPackageName}]`,Ce=`[${b.npmPackageName}@${b.projectVersion}]`,Y=2;function o(e,t){var a;if(e)return;const n=(()=>{if(!t)return null;const l=typeof t=="string"?t:JSON.stringify(t);return y.dim(`Debug info (for ${b.projectName} maintainers; you can ignore this): ${l}`)})(),r=`${b.githubRepository}/issues/new`;let s=[`You stumbled upon a bug in ${b.projectName}'s source code.`,`Go to ${y.blue(r)} and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,n].filter(Boolean).join(" ");s=C(s),s=W(s,"Bug"),s=L(s,!0);const i=G(s,Y);throw(a=m.onBeforeLog)==null||a.call(m),i}function h(e,t,{showStackTrace:n}={}){var s;if(e)return;t=C(t),t=W(t,"Wrong Usage"),t=L(t);const r=G(t,Y);throw n&&m.showStackTraceList.add(r),(s=m.onBeforeLog)==null||s.call(m),r}function Le(e){return e=C(e),e=W(e,"Error"),e=L(e),G(e,Y)}function _(e,t,{onlyOnce:n,showStackTrace:r}){var s;if(!e){if(t=C(t),t=W(t,"Warning"),t=L(t),n){const{alreadyLogged:i}=m,a=n===!0?t:n;if(i.has(a))return;i.add(a)}if((s=m.onBeforeLog)==null||s.call(m),r){const i=new Error(t);m.showStackTraceList.add(i),m.logger(i,"warn")}else m.logger(t,"warn")}}function Xt(e,t,{onlyOnce:n}){var r;if(!e){if(t=C(t),t=L(t),n){const{alreadyLogged:s}=m,i=t;if(s.has(i))return;s.add(i)}(r=m.onBeforeLog)==null||r.call(m),m.logger(t,"info")}}function W(e,t){let n=`[${t}]`;const r=t==="Warning"?"yellow":"red";return n=y.bold(y[r](n)),`${n}${e}`}function C(e){return e.startsWith("[")?e:` ${e}`}function L(e,t=!1){return`${t?Ce:_e}${e}`}function q(){return typeof window<"u"&&typeof window.scrollY=="number"}const j=P("utils/assertRouterType.ts",{});function Kt(){ce(Oe()),j.isClientRouting=!0}function Oe(){return j.isClientRouting!==!1}function Qt(){ce(j.isClientRouting!==!0),j.isClientRouting=!1}function ce(e){h(q(),`${y.cyan("import { something } from 'vike/client/router'")} is forbidden on the server-side`,{showStackTrace:!0}),_(e,"You shouldn't `import { something } from 'vike/client/router'` when using Server Routing. The 'vike/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle sizes.",{showStackTrace:!0,onlyOnce:!0})}const je=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],ue=["vue","svelte","marko","md","mdx"],xe=[...je,...ue];function fe(e){const t=xe.some(n=>e.endsWith("."+n));return o(!Fe(e)||t),t}function Fe(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function We(e){return ue.some(t=>e.endsWith("."+t))}function x(e,t,n){return typeof e=="string"?Z(e.split(""),t,n).join(""):Z(e,t,n)}function Z(e,t,n){const r=[];let s=t>=0?t:e.length+t;o(s>=0&&s<=e.length);let i=n>=0?n:e.length+n;for(o(i>=0&&i<=e.length);!(s===i||(s===e.length&&(s=0),s===i));){const a=e[s];o(a!==void 0),r.push(a),s++}return r}const de=["http://","https://","tauri://"];function ge(e){return de.some(t=>e.startsWith(t))||e.startsWith("/")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function Zt(e,t){o(t.includes(" but ")),h(typeof e=="string",`${t} should be a string`),!ge(e)&&(!e.startsWith("/")&&!e.includes(":")?h(!1,`${t} is ${y.cyan(e)} and it should be /${y.cyan(e)} instead (URL pathnames should start with a leading slash)`):h(!1,`${t} isn't a valid URL`))}function Ae(e,t){o(ge(e)),o(t.startsWith("/"));const[n,...r]=e.split("#");o(n!==void 0);const s=["",...r].join("#")||null;o(s===null||s.startsWith("#"));const i=s===null?"":z(s.slice(1)),[a,...l]=n.split("?");o(a!==void 0);const c=["",...l].join("?")||null;o(c===null||c.startsWith("?"));const u={},f={};Array.from(new URLSearchParams(c||"")).forEach(([$,Q])=>{u[$]=Q,f[$]=[...f.hasOwnProperty($)?f[$]:[],Q]});const{origin:d,pathname:E}=De(a,t);o(d===null||d===z(d)),o(E.startsWith("/")),o(d===null||e.startsWith(d));const g=a.slice((d||"").length);Ge(e,d,g,c,s);let{pathname:v,hasBaseServer:k}=Ue(E,t);return v=Ve(v),o(v.startsWith("/")),{origin:d,pathname:v,pathnameOriginal:g,hasBaseServer:k,search:u,searchAll:f,searchOriginal:c,hash:i,hashOriginal:s}}function z(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function Ve(e){return e=e.split("/").map(t=>z(t).split("/").join("%2F")).join("/"),e=e.replace(/\s/g,""),e}function De(e,t){var n;{const{origin:r,pathname:s}=D(e);if(r)return{origin:r,pathname:s};o(s===e)}if(e.startsWith("/"))return{origin:null,pathname:e};{let r=typeof window<"u"&&((n=window==null?void 0:window.document)==null?void 0:n.baseURI);r&&(r=D(r).pathname);const i=ze(e,r||t);return D(i)}}function D(e){if(de.some(t=>e.startsWith(t))){const[t,n,r,...s]=e.split("/"),i=[t,n,r].join("/"),a=["",...s].join("/")||"/";return{origin:i,pathname:a}}else return{pathname:e,origin:null}}function ze(e,t){const n=t.split("/"),r=e.split("/");let s=t.endsWith("/");e.startsWith(".")&&n.pop();for(const a in r){const l=r[a];l==""&&a==="0"||l!="."&&(l==".."?n.pop():(s=!1,n.push(l)))}let i=n.join("/");return s&&!i.endsWith("/")&&(i+="/"),i.startsWith("/")||(i="/"+i),i}function Ne(e){o(e.startsWith("/")),o(!e.includes("?")),o(!e.includes("#"))}function Ue(e,t){Ne(e),o(Be(t));let n=e;if(o(n.startsWith("/")),o(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===x(t,0,-1)&&(r=x(t,0,-1),o(n===r)),n.startsWith(r)?(o(n.startsWith("/")||n.startsWith("http")),o(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),o(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Be(e){return e.startsWith("/")}function Ge(e,t,n,r,s){const i=He(t,n,r,s);o(e===i)}function He(e,t,n,r){return`${e||""}${t}${n||""}${r||""}`}function X(e,t){t&&Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function A(e){return e instanceof Function||typeof e=="function"}function en(e){return(t,n)=>{const r=e(t),s=e(n);return r===s?0:r>s?-1:1}}function tn(e){return(t,n)=>{const r=e(t),s=e(n);return r===s?0:r<s?-1:1}}function Me(e){return(t,n)=>{const r=e(t),s=e(n);if(o([!0,!1,null].includes(r)),o([!0,!1,null].includes(s)),r===s)return 0;if(r===!0||s===!1)return-1;if(s===!0||r===!1)return 1;o(!1)}}function Je(e){return Me(t=>{const n=e(t);return n===null?null:!n})}function p(e,t,n="unknown"){if(!S(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?S(r):n==="string[]"?Array.isArray(r)&&r.every(s=>typeof s=="string"):n==="function"?A(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function Ye(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const qe=e=>e!=null;function he(e){const t=n=>`Not a posix path: ${n}`;o(e!==null,t("null")),o(typeof e=="string",t(`typeof path === ${JSON.stringify(typeof e)}`)),o(e!=="",t("(empty string)")),o(e),o(!e.includes("\\"),t(e))}const Xe=["clientRouting"];function Ke(e){Xe.forEach(t=>{if(o(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;h(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),h(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const pe=["render","clientRouting","prerender","doNotPrerender"];function Qe(e,t){h(!pe.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Ze(e,t){if(!e)return null;let[n,...r]=e;if(!n||r.length===0&&["*","default",t].includes(n))return null;o(n!=="*");let s="",i="";return n==="default"?s="export default":(s="export",r=[n,...r]),r.forEach(l=>{s=`${s} { ${l}`,i=` }${i}`}),s+i}function me(e,t,{definedAt:n}){const r=et(n,t),s=r==="internally"?r:`at ${r}`;let i=`${t}${e==="Hook"?"()":""}`;return`${e} ${y.cyan(i)} defined ${s}`}function et(e,t){if("isComputed"in e)return"internally";let n;return"files"in e?n=e.files:n=[e],o(n.length>=1),n.map(s=>{const{filePathToShowToUser:i,fileExportPathToShowToUser:a}=s;let l=i;const c=Ze(a,t);return c&&(l=`${l} > ${y.cyan(c)}`),l}).join(" / ")}function nn(e,t){const n=t.find(r=>r.pageId===e);return o(t.length>0),o(n),n}function ye({definedAt:e}){if("isComputed"in e||"files"in e)return null;const{filePathToShowToUser:t}=e;return o(t),t}function rn({definedAt:e}){const t=ye({definedAt:e});return o(t),t}function tt(e,t){const n={},r={},s={};e.forEach(l=>{nt(l).forEach(({exportName:u,exportValue:f,isFromDefaultExport:d})=>{o(u!=="default"),s[u]=s[u]??[],s[u].push({exportValue:f,exportSource:`${l.filePath} > ${d?`\`export default { ${u} }\``:`\`export { ${u} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:d})})}),t&&Object.entries(t.configValues).forEach(([l,c])=>{const{value:u}=c,f=ye(c),d=me("Config",l,c);r[l]=r[l]??u,n[l]=n[l]??[],o(n[l].length===0),n[l].push({configValue:u,configDefinedAt:d,configDefinedByFile:f});const E=l;s[E]=s[E]??[],s[E].push({exportValue:u,exportSource:d,filePath:f,_filePath:f,_fileType:null,_isFromDefaultExport:null})});const i=rt(),a={};return Object.entries(s).forEach(([l,c])=>{c.forEach(({exportValue:u,_fileType:f,_isFromDefaultExport:d})=>{a[l]=a[l]??u,f===".page"&&!d&&(l in i||(i[l]=u))})}),o(!("default"in a)),o(!("default"in s)),{config:r,configEntries:n,exports:a,exportsAll:s,pageExports:i}}function nt(e){const{filePath:t,fileExports:n}=e;o(n),o(fe(t));const r=[];return Object.entries(n).sort(Je(([s])=>s==="default")).forEach(([s,i])=>{let a=s==="default";if(a)if(We(t))s="Page";else{h(S(i),`The ${y.cyan("export default")} of ${t} should be an object.`),Object.entries(i).forEach(([l,c])=>{Qe(l,t),r.push({exportName:l,exportValue:c,isFromDefaultExport:a})});return}r.push({exportName:s,exportValue:i,isFromDefaultExport:a})}),r.forEach(({exportName:s,isFromDefaultExport:i})=>{o(!(i&&pe.includes(s)))}),r}function rt(){return new Proxy({},{get(...e){return q()||_(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vike.dev/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function st(e){const t=".page.",n=x(e.split(t),0,-1).join(t);return o(!n.includes("\\")),n}function T(e){he(e)}function sn(e,t){if(t.length>0){const r=t.filter(s=>s.isErrorPage);return r.length===0?null:(h(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=H(e.map(({pageId:r})=>r).filter(r=>V(r)));if(h(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return o(r),r}return null}function V(e,t){return o(!e.includes("\\")),e.includes("/_error")}function it(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return o(n),!!n.isErrorPage}else return V(e)}const ot=[".page",".page.server",".page.route",".page.client",".css"];function at(e){if(he(e),e.endsWith(".css"))return".css";o(fe(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],s=n.slice(-2)[0];if(s==="page")return".page";if(o(r==="page",e),s==="server")return".page.server";if(s==="client")return".page.client";if(s==="route")return".page.route";o(!1,e)}function Ee(e){const t=i=>s.pageId===i||s.isDefaultPageFile&&(ee(s.filePath)||lt(i,s.filePath)),n=at(e),s={filePath:e,fileType:n,isEnv:i=>{if(o(n!==".page.route"),i==="CLIENT_ONLY")return n===".page.client"||n===".css";if(i==="SERVER_ONLY")return n===".page.server";if(i==="CLIENT_AND_SERVER")return n===".page";o(!1)},isRelevant:t,isDefaultPageFile:N(e),isRendererPageFile:n!==".css"&&N(e)&&ee(e),isErrorPageFile:V(e),pageId:st(e)};return s}function N(e){return T(e),V(e)?!1:e.includes("/_default")}function ee(e){return T(e),e.includes("/renderer/")}function lt(e,t){T(e),T(t),o(!e.endsWith("/")),o(!t.endsWith("/")),o(N(t));const n=x(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function ct(e){o(Array.isArray(e)),e.forEach(t=>{o(S(t)),o(p(t,"pageId","string")),o(p(t,"routeFilesystem")),o(p(t,"configValuesSerialized")),o(p(t,"configValuesImported"))})}function ut(e){o(p(e,"configValuesImported"))}const ft=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function K(e){const t=JSON.parse(e);return ve(t)}function ve(e){return typeof e=="string"?dt(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=ve(n)}),e)}function dt(e){for(const{match:t,deserialize:n}of ft)if(t(e))return n(e,K);return e}const gt=["$$registrations","_rerender_only"],ht=[".md",".mdx"];function pt(e,t,n){mt(e,t,n)}function mt(e,t,n){const s=Object.keys(e).filter(a=>!gt.includes(a)),i=s.filter(a=>a!=="default"&&a!==n);if(i.length===0){if(s.length===1)return;{o(s.length===0);let a=`${t} doesn't export any value, but it should have a ${y.cyan("export default")}`;n&&(a+=` or ${y.cyan(`export { ${n} }`)}`),h(!1,a)}}else if(n){if(ht.some(a=>t.endsWith(a)))return;i.forEach(a=>{_(!1,`${t} should have only a single export: move ${y.cyan(`export { ${a} }`)} to +config.h.js or its own +${i}.js`,{onlyOnce:!0})})}else{const a=i.join(", ");h(!1,`${t} replace ${y.cyan(`export { ${a} }`)} with ${y.cyan(`export default { ${a} }`)}`)}}function U(e){const t={},n=(r,s,i,a)=>{t[r]={value:s,definedAt:{filePathToShowToUser:i,fileExportPathToShowToUser:[r,"default"].includes(a)?[]:[a]}},yt(s,r,i)};return e.forEach(r=>{if(r.isValueFile){const{exportValues:s,importPath:i,configName:a}=r;a!=="client"&&pt(s,i,a),Object.entries(s).forEach(([l,c])=>{const u=l!=="default",f=u?l:r.configName;u&&f in t||n(f,c,i,l)})}else{const{configName:s,importPath:i,exportValue:a,exportName:l}=r;n(s,a,i,l)}}),t}function yt(e,t,n){o(!n.includes("+config.")),h(e!==null,`Set ${y.cyan(t)} to ${y.cyan("null")} in a +config.h.js file instead of ${n}`)}function Et(e,t){const n=e.map(s=>{const i={};{const{configValuesSerialized:f}=s;Object.entries(f).forEach(([d,E])=>{{const{valueSerialized:g,definedAt:v}=E;o(g),o(!i[d]),i[d]={value:K(g),definedAt:v}}})}{const{configValuesImported:f}=s,d=U(f);Object.assign(i,d)}const{pageId:a,isErrorPage:l,routeFilesystem:c,loadConfigValuesAll:u}=s;return vt(i),{pageId:a,isErrorPage:l,routeFilesystem:c,configValues:i,loadConfigValuesAll:u}}),r={configValues:{}};{const s=U(t.configValuesImported);Object.assign(r.configValues,s)}return{pageConfigs:n,pageConfigGlobal:r}}function vt(e){const t="route",n=e[t];if(!n)return;const{value:r}=n,s=typeof r,i=me("Config",t,n);h(s==="string"||A(r),`${i} has an invalid type '${s}': it should be a string or a function instead, see https://vike.dev/route`)}function wt(e){o(p(e,"isGeneratedFile")),o(e.isGeneratedFile!==!1,"vike was re-installed(/re-built). Restart your app."),o(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),o(p(e,"pageFilesLazy","object")),o(p(e,"pageFilesEager","object")),o(p(e,"pageFilesExportNamesLazy","object")),o(p(e,"pageFilesExportNamesEager","object")),o(p(e.pageFilesLazy,".page")),o(p(e.pageFilesLazy,".page.client")||p(e.pageFilesLazy,".page.server")),o(p(e,"pageFilesList","string[]")),o(p(e,"pageConfigsSerialized")),o(p(e,"pageConfigGlobalSerialized"));const{pageConfigsSerialized:t,pageConfigGlobalSerialized:n}=e;ct(t),ut(n);const{pageConfigs:r,pageConfigGlobal:s}=Et(t,n),i={};O(e.pageFilesLazy).forEach(({filePath:l,pageFile:c,globValue:u})=>{c=i[l]=i[l]??c;const f=u;te(f),c.loadFile=async()=>{"fileExports"in c||(c.fileExports=await f(),Ke(c))}}),O(e.pageFilesExportNamesLazy).forEach(({filePath:l,pageFile:c,globValue:u})=>{c=i[l]=i[l]??c;const f=u;te(f),c.loadExportNames=async()=>{if(!("exportNames"in c)){const d=await f();h("exportNames"in d,"You seem to be using Vite 2 but the latest vike versions only work with Vite 3"),o(p(d,"exportNames","string[]"),c.filePath),c.exportNames=d.exportNames}}}),O(e.pageFilesEager).forEach(({filePath:l,pageFile:c,globValue:u})=>{c=i[l]=i[l]??c;const f=u;o(S(f)),c.fileExports=f}),O(e.pageFilesExportNamesEager).forEach(({filePath:l,pageFile:c,globValue:u})=>{c=i[l]=i[l]??c;const f=u;o(S(f)),o(p(f,"exportNames","string[]"),c.filePath),c.exportNames=f.exportNames}),e.pageFilesList.forEach(l=>{i[l]=i[l]??Ee(l)});const a=Object.values(i);return a.forEach(({filePath:l})=>{o(!l.includes("\\"))}),{pageFiles:a,pageConfigs:r,pageConfigGlobal:s}}function O(e){const t=[];return Object.entries(e).forEach(([n,r])=>{o(ot.includes(n)),o(S(r)),Object.entries(r).forEach(([s,i])=>{const a=Ee(s);o(a.fileType===n),t.push({filePath:s,pageFile:a,globValue:i})})}),t}function te(e){o(A(e))}const R=P("setPageFiles.ts",{});function on(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=wt(e);R.pageFilesAll=t,R.pageConfigs=n,R.pageConfigGlobal=r}async function an(e,t){e?(o(!R.pageFilesGetter),o(t===void 0)):(o(R.pageFilesGetter),o(typeof t=="boolean"),(!R.pageFilesAll||!t)&&await R.pageFilesGetter());const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:s}=R;o(n&&r&&s);const i=St(n,r);return{pageFilesAll:n,allPageIds:i,pageConfigs:r,pageConfigGlobal:s}}function St(e,t){const n=e.filter(({isDefaultPageFile:i})=>!i).map(({pageId:i})=>i),r=H(n),s=t.map(i=>i.pageId);return[...r,...s]}function $t(e,t){return we(e,t,!0)}function ln(e,t){return we(e,t,!1)}function we(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",s=e.filter(g=>g.isRelevant(t)&&g.fileType!==".page.route").sort(Rt(n,t)),i=g=>{const v=s.filter($=>$.pageId===t&&$.isEnv(g?"CLIENT_AND_SERVER":r));h(v.length<=1,`Merge the following files into a single file: ${v.map($=>$.filePath).join(" ")}`);const k=v[0];return o(k===void 0||!k.isDefaultPageFile),k},a=i(!1),l=i(!0),c=g=>s.filter(v=>v.isRendererPageFile&&v.isEnv(g?"CLIENT_AND_SERVER":r))[0],u=c(!1),f=c(!0),d=s.filter(g=>g.isDefaultPageFile&&!g.isRendererPageFile&&(g.isEnv(r)||g.isEnv("CLIENT_AND_SERVER")));return[a,l,...d,u,f].filter(qe)}function Rt(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,s=1,i=0;return(a,l)=>{if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;if(!l.isDefaultPageFile&&a.isDefaultPageFile)return s;{const c=a.isRendererPageFile,u=l.isRendererPageFile;if(!c&&u)return r;if(!u&&c)return s;o(c===u)}{const c=ne(t,a.filePath),u=ne(t,l.filePath);if(c<u)return r;if(u<c)return s;o(c===u)}{if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r;if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return s}return i}}function ne(e,t){T(e),T(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),s=t.slice(n),i=r.split("/").length,a=s.split("/").length;return i+a}const bt="modulepreload",Tt=function(e){return"/"+e},re={},cn=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Tt(i),i in re)return;re[i]=!0;const a=i.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let f=s.length-1;f>=0;f--){const d=s[f];if(d.href===i&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":bt,a||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),a)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})};function Pt(){o(q())}function kt(){Pt()}function se(e){const t=e/1e3;if(t<120){const n=ie(t);return`${n} second${oe(n)}`}{const n=t/60,r=ie(n);return`${r} minute${oe(r)}`}}function ie(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function oe(e){return e==="1"?"":"s"}const It=P("utils/executeHook.ts",{userHookErrors:new Map});function _t(e,t,n){const{timeoutErr:r,timeoutWarn:s}=Ct(t);let i,a;const l=new Promise((d,E)=>{i=g=>{c(),d(g)},a=g=>{c(),E(g)}}),c=()=>{clearTimeout(u),clearTimeout(f)},u=setTimeout(()=>{_(!1,`The ${t}() hook defined by ${n} is taking more than ${se(s)}`,{onlyOnce:!1})},s),f=setTimeout(()=>{const d=Le(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${se(r)}`);a(d)},r);return(async()=>{try{const d=await e();i(d)}catch(d){S(d)&&It.userHookErrors.set(d,{hookName:t,hookFilePath:n}),a(d)}})(),l}function Ct(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function un(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:s}=Ae(t,"/");let i;return e!=null&&e.withoutHash?i=`${s}${n||""}`:i=`${s}${n||""}${r||""}`,o(i.startsWith("/")),i}kt();function fn(){const e="vike_pageContext",t=document.getElementById(e);h(t,`The element #${e} (which vike automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;o(n);const r=K(n);return o(p(r,"_pageId","string")),X(r,{_hasPageContextFromServer:!0}),r}function B(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];if(o(r.exportValue===n),n===null)return null;const s=r.filePath;return o(s),o(!s.endsWith(" ")),Lt(n,{hookName:t,hookFilePath:s}),{hookFn:n,hookName:t,hookFilePath:s}}function dn(e,t){B(e,t)}function Lt(e,{hookName:t,hookFilePath:n}){o(t&&n),o(!t.endsWith(")")),h(A(e),`Hook ${t}() defined by ${n} should be a function`)}function Ot(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>Ye(n,r)).forEach(([n,r])=>{e[n]=r})}function jt(e){xt(e),Ft(e)}function xt(e){it(e._pageId,e._pageConfigs)&&o(p(e,"is404","boolean"))}function Ft(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!S(t)){_(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const Wt="not-serializable",F=P("getPageContextProxyForUser.ts",{});function At(e){return o([!0,!1].includes(e._hasPageContextFromServer)),o([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const r=e[n],s=JSON.stringify(n);return h(r!==Wt,`pageContext[${s}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),Vt(e,n),r}})}function Vt(e,t){if(F.prev===t||F.prev==="__v_raw"||(Nt(t),t in e)||zt(t))return;const n=JSON.stringify(t);e._hasPageContextFromServer&&!e._hasPageContextFromClient&&h(!1,`pageContext[${n}] isn't available on the client-side because ${n} is missing in passToClient, see https://vike.dev/passToClient`)}const Dt=["then","toJSON"];function zt(e){return!!(Dt.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function Nt(e){F.prev=e,window.setTimeout(()=>{F.prev=void 0},0)}function Ut(e,t){if(t){const s=e;o([!0,!1].includes(s.isHydration)),o([!0,!1,null].includes(s.isBackwardNavigation))}else{const s=e;o(s.isHydration===!0),o(s.isBackwardNavigation===null)}o("config"in e),o("configEntries"in e),o("exports"in e),o("exportsAll"in e),o("pageExports"in e),o(S(e.pageExports));const n=e.exports.Page;X(e,{Page:n}),Bt(e),Ot(e);const r=At(e);return jt(e),r}function Bt(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function Gt(e,t){const n=e.filter(s=>s.pageId===t);return o(n.length<=1),n[0]??null}async function Ht(e,t){if("isAllLoaded"in e&&!t)return e;const n=await e.loadConfigValuesAll(),r=U(n);return Object.assign(e.configValues,r),X(e,{isAllLoaded:!0}),e}const Se="__whileFetchingAssets";async function gn(e,t){const n=$t(t._pageFilesAll,e),r=Gt(t._pageConfigs,e);let s;const i=!1;try{s=(await Promise.all([r&&Ht(r,i),...n.map(g=>{var v;return(v=g.loadFile)==null?void 0:v.call(g)})]))[0]}catch(E){throw Mt(E)&&Object.assign(E,{[Se]:!0}),E}const{config:a,configEntries:l,exports:c,exportsAll:u,pageExports:f}=tt(n,s);return{config:a,configEntries:l,exports:c,exportsAll:u,pageExports:f,_pageFilesLoaded:n}}function hn(e){return e?e[Se]===!0:!1}function Mt(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}async function pn(e,t){const n=Ut(e,t);let r=null,s;r=B(e,"render"),s="render";{const l=B(e,"onRenderClient");l&&(r=l,s="onRenderClient")}if(!r){const l=Jt(e);if(o(l),e._pageConfigs.length>0)h(!1,`No onRenderClient() hook defined for URL '${l}', but it's needed, see https://vike.dev/onRenderClient`);else{const c=e._pageFilesLoaded.filter(f=>f.fileType===".page.client");let u;c.length===0?u="No file `*.page.client.*` found for URL "+l:u="One of the following files should export a render() hook: "+c.map(f=>f.filePath).join(" "),h(!1,u)}}o(r);const i=r.hookFn;o(s);const a=await _t(()=>i(n),s,r.hookFilePath);h(a===void 0,`The ${s}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function Jt(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t=t??window.location.href,t}export{Xt as A,P as B,sn as C,Ut as D,nn as E,K as F,Le as G,en as H,et as I,V as J,rn as K,Be as L,ge as M,$t as N,Gt as O,Me as P,tn as Q,Zt as R,hn as S,qt as T,cn as _,fn as a,h as b,an as c,_ as d,Qt as e,Yt as f,un as g,pn as h,dn as i,A as j,o as k,gn as l,me as m,Pt as n,X as o,y as p,Kt as q,S as r,on as s,p as t,ln as u,Ae as v,x as w,q as x,B as y,_t as z};
